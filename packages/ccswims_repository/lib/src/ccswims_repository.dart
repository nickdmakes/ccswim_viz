import 'ccswims_api.dart';
import 'dart:convert';

class CCSwimsRepository {
  CCSwimsRepository({CCSwimsApiClient? ccswimsApiClient})
    : _ccswimsApiClient = ccswimsApiClient ?? CCSwimsApiClient();

  final CCSwimsApiClient _ccswimsApiClient;

  /// Search CCSwims database for swimmers
  Future<dynamic> swimmerSearch(String fullname, String club) async {
    String swimmerSearchHash = _ccswimsApiClient.hashSwimmerForCache(fullname, club);
    List<dynamic>? cachedResult = _ccswimsApiClient.cache.read<List<dynamic>>(key: swimmerSearchHash);
    if(cachedResult != null) {
      return cachedResult;
    } else {
      final swimmers = await _ccswimsApiClient.swimmerSearchRequest(fullname, club);
      _ccswimsApiClient.cache.write<List<dynamic>>(key: swimmerSearchHash, value: swimmers);
      return swimmers;
    }
  }

  /// Get mock data for swimmers
  Future<dynamic> mockSwimmerSearch() async {
    List<dynamic> mockSwimmers = [{"fullname":"Lauren Agnew","club":"SCAR"},{"fullname":"Lauren Alimento","club":"SCUCD"},{"fullname":"Lauren Alimento","club":"UCD"},{"fullname":"Lauren Anderson","club":"AZCS"},{"fullname":"Lauren Anderson","club":"UA"},{"fullname":"Lauren Arnold","club":"AFA"},{"fullname":"Lauren Ashley Jerothe","club":"GMU"},{"fullname":"Lauren Ashley Jerothe","club":"GMUSC"},{"fullname":"Lauren Bayle","club":"UNCW"},{"fullname":"Lauren Bedell","club":"MOFO"},{"fullname":"Lauren Behringer","club":"UNCCH"},{"fullname":"Lauren Bell","club":"CSOSU"},{"fullname":"Lauren Belloff","club":"UDSC"},{"fullname":"Lauren Bermke","club":"LUC"},{"fullname":"Lauren Bermke","club":"MARQ"},{"fullname":"Lauren Bidwell","club":"GTSC"},{"fullname":"Lauren Bowser","club":"NSUSC"},{"fullname":"Lauren Bradshaw","club":"APPST"},{"fullname":"Lauren Branford","club":"GVSU"},{"fullname":"Lauren Brennan","club":"VTSC"},{"fullname":"Lauren Briggs","club":"XUSC"},{"fullname":"Lauren Brindley","club":"IUP"},{"fullname":"Lauren Brooks","club":"SYR"},{"fullname":"Lauren Brooks","club":"SYR-B"},{"fullname":"Lauren Brown","club":"UVA"},{"fullname":"Lauren Bulger","club":"UDSC"},{"fullname":"Lauren Butler","club":"ELON"},{"fullname":"Lauren Cabrera","club":"JMU"},{"fullname":"Lauren Campbell","club":"MSOE"},{"fullname":"Lauren Carey","club":"BGCS"},{"fullname":"Lauren Carey","club":"BGSC"},{"fullname":"Lauren Carey","club":"BGSU"},{"fullname":"Lauren Carl","club":"UCCS"},{"fullname":"Lauren Carlson","club":"UMSC"},{"fullname":"Lauren Cassella","club":"LUM"},{"fullname":"Lauren Chang","club":"MICH"},{"fullname":"Lauren Chang","club":"UMICH"},{"fullname":"Lauren Charles","club":"JMU"},{"fullname":"Lauren Charlton","club":"PSC"},{"fullname":"Lauren Coleman","club":"GEST"},{"fullname":"Lauren Cooke","club":"FCSD"},{"fullname":"Lauren Cooper","club":"VCS"},{"fullname":"Lauren Cooper","club":"VUCS"},{"fullname":"Lauren Copenhaver","club":"ELON"},{"fullname":"Lauren Cosenza","club":"ICSC"},{"fullname":"Lauren Crisileo","club":"UGA"},{"fullname":"Lauren Crisileo","club":"UGAS"},{"fullname":"Lauren Crisileo","club":"UGASC"},{"fullname":"Lauren Crowe","club":"NDSC"},{"fullname":"Lauren Cwik","club":"AUCS"},{"fullname":"Lauren Czaja","club":"NDSC"},{"fullname":"Lauren Danco","club":"UGASC"},{"fullname":"Lauren David","club":"LUCSC"},{"fullname":"Lauren Davis","club":"CLEM"},{"fullname":"Lauren DeCrescente","club":"PSU"},{"fullname":"Lauren Dempsey","club":"PSU"},{"fullname":"Lauren Dempsey","club":"SCUW"},{"fullname":"Lauren Dennen","club":"IUSC"},{"fullname":"Lauren DePiero","club":"VCS"},{"fullname":"Lauren Depiero","club":"VU"},{"fullname":"Lauren DePiero","club":"VUCS"},{"fullname":"Lauren DePietro","club":"ICSC"},{"fullname":"Lauren DePietro","club":"ITH"},{"fullname":"Lauren DeSantis","club":"PSC"},{"fullname":"Lauren Donnelly","club":"VOLS"},{"fullname":"Lauren Drury","club":"WFU"},{"fullname":"Lauren Duhamel","club":"PCS"},{"fullname":"Lauren Duhamel","club":"PENN"},{"fullname":"Lauren Duhamel","club":"UPENN"},{"fullname":"Lauren Dunkel","club":"IUP"},{"fullname":"Lauren Eastman","club":"UGA"},{"fullname":"Lauren Eastman","club":"UGAS"},{"fullname":"Lauren Eastman","club":"UGASC"},{"fullname":"Lauren Eisen","club":"UT"},{"fullname":"Lauren Eisen","club":"UTCLU"},{"fullname":"Lauren Eldridge","club":"GTSC"},{"fullname":"Lauren Ellingsberg","club":"GRIN"},{"fullname":"Lauren Ellison","club":"WUSTL"},{"fullname":"Lauren Falvey","club":"W&M"},{"fullname":"Lauren Ferreira","club":"WICK"},{"fullname":"Lauren Ford","club":"UGASC"},{"fullname":"Lauren Fracassa","club":"UMAIN"},{"fullname":"Lauren French","club":"UVA"},{"fullname":"Lauren Gascho","club":"BLCK"},{"fullname":"Lauren Geer","club":"CLEM"},{"fullname":"Lauren Gennusa","club":"KU"},{"fullname":"Lauren Gennusa","club":"KUSDC"},{"fullname":"Lauren Gillette","club":"MICH"},{"fullname":"Lauren Gillette","club":"SWAM"},{"fullname":"Lauren Giordani","club":"CCU"},{"fullname":"Lauren Giordoni","club":"CCU"},{"fullname":"Lauren Githens","club":"UCF"},{"fullname":"Lauren Githens","club":"UCFFL"},{"fullname":"Lauren Goodall","club":"UGA"},{"fullname":"Lauren Goodall","club":"UGAS"},{"fullname":"Lauren Goodall","club":"UGASC"},{"fullname":"Lauren Grabos","club":"CSU"},{"fullname":"Lauren Graham","club":"UMCS"},{"fullname":"Lauren Graham","club":"UMCSL"},{"fullname":"Lauren Graves","club":"CMCS"},{"fullname":"Lauren Graves","club":"CMU"},{"fullname":"Lauren Gregory","club":"APP"},{"fullname":"Lauren Gregory","club":"APPST"},{"fullname":"Lauren Gregory","club":"ASU"},{"fullname":"Lauren Groseclose","club":"CLEM"},{"fullname":"Lauren Hackett","club":"UNCW"},{"fullname":"Lauren Haggerty","club":"GTSC"},{"fullname":"Lauren Hall","club":"VTSC"},{"fullname":"Lauren Hamilton","club":"DART"},{"fullname":"Lauren Han","club":"SCIU"},{"fullname":"Lauren Hans","club":"CREAM"},{"fullname":"Lauren Hans","club":"SCIU"},{"fullname":"Lauren Hartman","club":"MVNU"},{"fullname":"Lauren Haskell","club":"UDSC"},{"fullname":"Lauren Hendricks","club":"GVSU"},{"fullname":"Lauren Henricks","club":"GVSU"},{"fullname":"Lauren Hicks","club":"GCU"},{"fullname":"Lauren Hobbs","club":"UO"},{"fullname":"Lauren Hobbs","club":"UOFO"},{"fullname":"Lauren Hoekstra","club":"TAMCS"},{"fullname":"Lauren Howard","club":"SIM"},{"fullname":"Lauren Jacobsen","club":"UC04"},{"fullname":"Lauren Jerothe","club":"GMU"},{"fullname":"Lauren Jerothe","club":"GMUVA"},{"fullname":"Lauren Karp","club":"PSU"},{"fullname":"Lauren Karpyn","club":"UDSC"},{"fullname":"Lauren Kennedy","club":"TAMCS"},{"fullname":"Lauren Kjellberg","club":"UACS"},{"fullname":"Lauren Knowlton","club":"CREI"},{"fullname":"Lauren Krahl","club":"UW"},{"fullname":"Lauren Krause","club":"HPU"},{"fullname":"Lauren Kring","club":"UGA"},{"fullname":"Lauren Kring","club":"UGASC"},{"fullname":"Lauren LaMar","club":"MIZZ"},{"fullname":"Lauren Lampe","club":"PURD"},{"fullname":"Lauren Lansing","club":"SCUW"},{"fullname":"Lauren Lanzendorfer","club":"PITT"},{"fullname":"Lauren Lazendorfer","club":"PITT"},{"fullname":"Lauren Lee","club":"NUIL"},{"fullname":"Lauren Lepeak","club":"UVM"},{"fullname":"Lauren Liston","club":"CRMSN"},{"fullname":"Lauren Liston","club":"IUSC"},{"fullname":"Lauren Liston","club":"SCIU"},{"fullname":"Lauren Louwers","club":"MICH"},{"fullname":"Lauren Lozada","club":"UCF"},{"fullname":"Lauren Lubenow","club":"ICSC"},{"fullname":"Lauren Lynch","club":"MOFO"},{"fullname":"Lauren Mackenzie","club":"APP"},{"fullname":"Lauren Mackenzie","club":"ASU"},{"fullname":"Lauren Marcey","club":"AUB"},{"fullname":"Lauren Marlier","club":"NCSU"},{"fullname":"Lauren Martin","club":"UGA"},{"fullname":"Lauren Martin","club":"UGAS"},{"fullname":"Lauren Martin","club":"UOFSC"},{"fullname":"Lauren Mayo","club":"UNL"},{"fullname":"Lauren McCloskey","club":"PSU"},{"fullname":"Lauren McCormack","club":"MN"},{"fullname":"Lauren McGovern","club":"WAKE"},{"fullname":"Lauren McGovern","club":"WFU"},{"fullname":"Lauren McGrath","club":"UCCS"},{"fullname":"Lauren McInerny","club":"UNCC"},{"fullname":"Lauren Mercer","club":"UCFFL"},{"fullname":"Lauren Michaels","club":"MSUSC"},{"fullname":"Lauren Morris","club":"UCD"},{"fullname":"Lauren Mottel","club":"UDSC"},{"fullname":"Lauren Murphy","club":"GVSU"},{"fullname":"Lauren Murphy","club":"UVA"},{"fullname":"Lauren Nance","club":"UNCW"},{"fullname":"Lauren Nash","club":"W&M"},{"fullname":"Lauren Nedrow","club":"PITT"},{"fullname":"Lauren Nedrow","club":"PSC"},{"fullname":"Lauren Niziol","club":"SRU"},{"fullname":"Lauren Niziol","club":"SRUS"},{"fullname":"Lauren O'Malley","club":"PITT"},{"fullname":"Lauren Olson","club":"BROWN"},{"fullname":"Lauren Ors","club":"SWAM"},{"fullname":"Lauren Owens","club":"PCSNJ"},{"fullname":"Lauren Owens","club":"PRINC"},{"fullname":"Lauren Pantaleone","club":"UDSC"},{"fullname":"Lauren Pascucci","club":"FSUC"},{"fullname":"Lauren Patterson","club":"UKCS"},{"fullname":"Lauren Philips","club":"MSUSC"},{"fullname":"Lauren Phillips","club":"MSUSC"},{"fullname":"Lauren Ponnathong","club":"WCUCS"},{"fullname":"Lauren Potter","club":"DUKE"},{"fullname":"Lauren Price","club":"CLEM"},{"fullname":"Lauren Pruden","club":"MLSC"},{"fullname":"Lauren Pyjar","club":"GTOWN"},{"fullname":"Lauren Radell","club":"UCONN"},{"fullname":"Lauren Radell","club":"UCSC"},{"fullname":"Lauren Rapley","club":"TUCS"},{"fullname":"Lauren Rhodes","club":"UNCCH"},{"fullname":"Lauren Ries","club":"MIZZ"},{"fullname":"Lauren Ries","club":"MUSC"},{"fullname":"Lauren Ritter","club":"GCS"},{"fullname":"Lauren Ritter","club":"SCAR"},{"fullname":"Lauren Ritter","club":"UOFSC"},{"fullname":"Lauren Rodenberg","club":"NDSC"},{"fullname":"Lauren Rodenburg","club":"NDSC"},{"fullname":"Lauren Roper","club":"UCONN"},{"fullname":"Lauren Roper","club":"UCSC"},{"fullname":"Lauren Rutkowski","club":"PSU"},{"fullname":"Lauren Salvadore","club":"UCONN"},{"fullname":"Lauren Salvadore","club":"UCSC"},{"fullname":"Lauren Sanders","club":"WCU"},{"fullname":"Lauren Sapochetti","club":"LUC"},{"fullname":"Lauren Sapochetti","club":"LUCSC"},{"fullname":"Lauren Sawle","club":"CMICH"},{"fullname":"Lauren Sawyer","club":"PSU"},{"fullname":"Lauren Sayles","club":"CU"},{"fullname":"Lauren Scheurle","club":"BGSU"},{"fullname":"Lauren Schlageter","club":"NU"},{"fullname":"Lauren Schober","club":"FCST"},{"fullname":"Lauren Schober","club":"FLOR"},{"fullname":"Lauren Scott","club":"CLEM"},{"fullname":"Lauren Scott","club":"UNCW"},{"fullname":"Lauren Seib","club":"NDSC"},{"fullname":"Lauren Sherlock","club":"LUM"},{"fullname":"Lauren Shipp","club":"UDSC"},{"fullname":"Lauren Sievers","club":"CU"},{"fullname":"Lauren Sim","club":"UO"},{"fullname":"Lauren Simpson","club":"WMU"},{"fullname":"Lauren Simpson","club":"WMUSC"},{"fullname":"Lauren Sims","club":"ORE"},{"fullname":"Lauren Sims","club":"UO"},{"fullname":"Lauren Sims","club":"UOFO"},{"fullname":"Lauren Singles","club":"ELON"},{"fullname":"Lauren Sloan","club":"ISUSC"},{"fullname":"Lauren Sommers","club":"ODUCS"},{"fullname":"Lauren Spangler","club":"FCSD"},{"fullname":"Lauren Spangler","club":"UF"},{"fullname":"Lauren Spehlmann","club":"VTSC"},{"fullname":"Lauren Stigers","club":"UKCS"},{"fullname":"Lauren Stipe","club":"GTWN"},{"fullname":"Lauren Taylor","club":"CPSC"},{"fullname":"Lauren Taylor","club":"POLY"},{"fullname":"Lauren Trail","club":"UMICH"},{"fullname":"Lauren Tringale","club":"GMU"},{"fullname":"Lauren Tringale","club":"GMUSC"},{"fullname":"Lauren Tringale","club":"GMUVA"},{"fullname":"Lauren Turk","club":"UMD"},{"fullname":"Lauren Tylor","club":"POLY"},{"fullname":"Lauren Varga","club":"MOFO"},{"fullname":"Lauren Vidmar","club":"SRU"},{"fullname":"Lauren Vigliano","club":"JMU"},{"fullname":"Lauren Vitale","club":"UCF"},{"fullname":"Lauren Vitale","club":"UCFFL"},{"fullname":"Lauren Walker","club":"DUKE"},{"fullname":"Lauren Walker","club":"UNAT"},{"fullname":"Lauren Walls","club":"MSUSC"},{"fullname":"Lauren Watkins","club":"FCGU"},{"fullname":"Lauren Watkins","club":"FGCU"},{"fullname":"Lauren White","club":"CMU"},{"fullname":"Lauren White","club":"MESA"},{"fullname":"Lauren Wilson","club":"WMU"},{"fullname":"Lauren Winkler","club":"CRMSN"},{"fullname":"Lauren Winkler","club":"IUSC"},{"fullname":"Lauren Winkler","club":"SCIU"},{"fullname":"Lauren Wood","club":"UWM"},{"fullname":"Lauren Yao","club":"GTSC"},{"fullname":"Lauren Zelinske","club":"UTK"},{"fullname":"Laurens Vermeulen","club":"UCF"},{"fullname":"Mary Lauren Reese","club":"CCU"}];
    return mockSwimmers;
  }

  /// Search CCSwims database for all times for a specific swimmer
  Future<dynamic> allTimesSearch(String fullname, String club) async {
    String swimmerTimesHash = _ccswimsApiClient.hashTimesForCache(fullname, club);
    List<dynamic>? cachedResult = _ccswimsApiClient.cache.read<List<dynamic>>(key: swimmerTimesHash);
    if(cachedResult != null) {
      return cachedResult;
    } else {
      final swimmers = await _ccswimsApiClient.allTimesSearchRequest(fullname, club);
      _ccswimsApiClient.cache.write<List<dynamic>>(key: swimmerTimesHash, value: swimmers);
      return swimmers;
    }
  }
}
